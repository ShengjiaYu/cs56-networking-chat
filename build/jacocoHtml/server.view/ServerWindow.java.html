<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ServerWindow.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">cs56-networking-chat</a> &gt; <a href="index.source.html" class="el_package">server.view</a> &gt; <span class="el_source">ServerWindow.java</span></div><h1>ServerWindow.java</h1><pre class="source lang-java linenums">package server.view;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.TextArea;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

import server.controller.ServerController;

/**
 * Represents a JFrame window of a server
 * @author Peng Wang, Andro Stotts, Max Hinson, and Bryce Filler
 * @version 0.5
 */
public class ServerWindow extends JFrame{

    private static final long serialVersionUID = 1L;
    private JLabel onlineCountText;
    private JButton onlineCountUpdate;
    private JButton btStart;
    private JButton btClose;
    private JButton btKick;
    private TextArea taConsole;
    private static ServerWindow window;
    private ServerController controller;
    private JList&lt;String&gt; userList;
    
    /**
     * Default constructor
     */
<span class="nc" id="L33">    private ServerWindow(){</span>

<span class="nc" id="L35">	btStart = new JButton(&quot;Start Server&quot;);</span>
<span class="nc" id="L36">	btClose = new JButton(&quot;Close Server&quot;);</span>
<span class="nc" id="L37">	btKick = new JButton(&quot;Kick User&quot;);</span>
<span class="nc" id="L38">	userList = new JList&lt;String&gt;();</span>
<span class="nc" id="L39">	taConsole = new TextArea();</span>
	
<span class="nc" id="L41">	onlineCountText = new JLabel(&quot;Users Online: &quot;);</span>
<span class="nc" id="L42">	onlineCountUpdate = new JButton (&quot;Refresh&quot;);</span>

	//get an instance of controller
<span class="nc" id="L45">	controller = ServerController.getController();</span>
<span class="nc" id="L46">    }</span>
	
    /**
     * Gets the ServerWindow object
     * @return instance of ServerWindow
     */
    public static ServerWindow getWindow(){
<span class="nc bnc" id="L53" title="All 2 branches missed.">	if(window == null)</span>
<span class="nc" id="L54">	    window = new ServerWindow();</span>
<span class="nc" id="L55">	return window;</span>
    }
	
    /**
     * Creates the server window
     */
    public void launchWindow(){
<span class="nc" id="L62">	this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L63">	this.setLocation(100, 100);</span>
<span class="nc" id="L64">	this.setSize(800, 600);</span>
<span class="nc" id="L65">	this.setTitle(&quot;Chatting Server&quot;);</span>
<span class="nc" id="L66">	JPanel rightPanel = new JPanel();</span>
<span class="nc" id="L67">	JPanel leftPanel = new JPanel();</span>
<span class="nc" id="L68">	JPanel buttonPanel = new JPanel();</span>
		
<span class="nc" id="L70">	rightPanel.setBorder(BorderFactory.createLineBorder(Color.black));</span>
<span class="nc" id="L71">	rightPanel.setLayout(new BorderLayout());</span>
<span class="nc" id="L72">	buttonPanel.add(btStart);</span>
<span class="nc" id="L73">	buttonPanel.add(btClose);</span>
<span class="nc" id="L74">	buttonPanel.add(btKick);</span>
<span class="nc" id="L75">	buttonPanel.add(onlineCountUpdate);</span>

<span class="nc" id="L77">	btStart.setEnabled(true);</span>
<span class="nc" id="L78">	btClose.setEnabled(false);</span>
<span class="nc" id="L79">	btKick.setEnabled(false);</span>
<span class="nc" id="L80">	taConsole.setEditable(false);</span>
<span class="nc" id="L81">	taConsole.setBackground(Color.WHITE);</span>
<span class="nc" id="L82">	rightPanel.add(buttonPanel, BorderLayout.NORTH);</span>
<span class="nc" id="L83">	rightPanel.add(taConsole,BorderLayout.CENTER);</span>
		
<span class="nc" id="L85">	leftPanel.setBorder(BorderFactory.createLineBorder(Color.black));</span>
<span class="nc" id="L86">	leftPanel.setLayout(new BorderLayout());</span>
<span class="nc" id="L87">	leftPanel.add(onlineCountText,BorderLayout.NORTH);</span>
<span class="nc" id="L88">	leftPanel.add(userList,BorderLayout.CENTER);</span>
		
<span class="nc" id="L90">	this.getContentPane().add(rightPanel, BorderLayout.CENTER);</span>
<span class="nc" id="L91">	this.getContentPane().add(leftPanel, BorderLayout.WEST);</span>
		
<span class="nc" id="L93">	btStart.addActionListener(new myButtonListener());</span>
<span class="nc" id="L94">	btClose.addActionListener(new myButtonListener());</span>
<span class="nc" id="L95">	btKick.addActionListener(new myButtonListener());</span>
<span class="nc" id="L96">	onlineCountUpdate.addActionListener(new myButtonListener2());</span>

<span class="nc" id="L98">	this.setVisible(true);</span>
<span class="nc" id="L99">    }</span>
	
    /**
     * Gets the TextArea component of the server window
     * @return TextArea component that represents the server output
     */
    public TextArea getTaConsole(){
<span class="nc" id="L106">	return taConsole;</span>
    }
	
    /**
     * Gets the JList component of the server window
     * @return JList component that represents the user list
     */
    public JList getUserList(){
<span class="nc" id="L114">	return userList;</span>
    }
   
    /**
     * Handles the actions when buttons have been clicked on the server window
     * @author Peng Wang, Andro Stotts, Max Hinson, and Bryce Filler
     * @version 0.5
     */
<span class="nc" id="L122">    class myButtonListener implements ActionListener{</span>
	public void actionPerformed(ActionEvent e) {
<span class="nc bnc" id="L124" title="All 2 branches missed.">	    if(e.getActionCommand() == &quot;Start Server&quot;){</span>
<span class="nc" id="L125">		taConsole.setText(&quot;&quot;);</span>
<span class="nc" id="L126">		taConsole.append(controller.startServer());	</span>
<span class="nc" id="L127">		btStart.setEnabled(false);</span>
<span class="nc" id="L128">		btClose.setEnabled(true);</span>
<span class="nc" id="L129">		btKick.setEnabled(true);</span>
	    }
<span class="nc bnc" id="L131" title="All 2 branches missed.">	    else if (e.getActionCommand() == &quot;Kick User&quot;){</span>
<span class="nc bnc" id="L132" title="All 2 branches missed.">		if(userList.getSelectedValue() == null)</span>
<span class="nc" id="L133">		    taConsole.append(&quot;[Server Message] No user selected to kick\n&quot;);</span>
		else
<span class="nc" id="L135">		    taConsole.append(controller.kickUser((String)userList.getSelectedValue()));</span>
	    }
	    else{
<span class="nc" id="L138">		taConsole.append(controller.closeServer());</span>
<span class="nc" id="L139">		btStart.setEnabled(true);</span>
<span class="nc" id="L140">		btClose.setEnabled(false);</span>
<span class="nc" id="L141">		btKick.setEnabled(false);</span>
	    }
<span class="nc" id="L143">	}		</span>
    }

    /**
     * Handles action when Refresh button is pressed
     * @author Arturo Milanes and Winfred Huang
     */
<span class="nc" id="L150">    class myButtonListener2 implements ActionListener{</span>
	public void actionPerformed(ActionEvent e){
<span class="nc" id="L152">	    int count = 0;</span>
<span class="nc" id="L153">	    ListModel&lt;String&gt; list= userList.getModel();</span>
<span class="nc" id="L154">	    count = list.getSize();</span>
<span class="nc" id="L155">	    onlineCountText.setText(&quot;Users Online: &quot; + String.valueOf(count));</span>
<span class="nc" id="L156">	}</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.0.201801022044</span></div></body></html>