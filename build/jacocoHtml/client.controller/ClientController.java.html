<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ClientController.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">cs56-networking-chat</a> &gt; <a href="index.source.html" class="el_package">client.controller</a> &gt; <span class="el_source">ClientController.java</span></div><h1>ClientController.java</h1><pre class="source lang-java linenums">package client.controller;

import client.model.Client;
import client.model.Contact;
import client.view.ClientWindow;
import java.awt.Color;
import javax.swing.DefaultListModel;

/**
 * ClientController class controlls the communication between client view and client model
 * @author Peng Wang, Andro Stotts, Bryce Filler, Max Hinson
 * @version 0.4
 */
public class ClientController {
    private Client client;
    private static ClientController controller;
	
    /**
     * Constructor saves a instance of a client object
     */
<span class="fc" id="L21">    private ClientController(){</span>
<span class="fc" id="L22">	client = Client.getClient();</span>
<span class="fc" id="L23">    }</span>
	
    /**
     * Gets instance of ClientController
     * @return instance of ClientController
     */
    public static ClientController getController(){
<span class="pc bpc" id="L30" title="1 of 2 branches missed.">	if(controller == null)</span>
<span class="fc" id="L31">	    controller = new ClientController();</span>
<span class="fc" id="L32">	return controller;</span>
    }

    /**
     * sets the nickname of the client from the controller
     */
    public void setNickname(String nickname){
<span class="nc" id="L39">	client.setNickname(nickname);</span>
<span class="nc" id="L40">    }</span>

    /**
     * controller gets nickname from Client
     */
    public String getNickname(){
<span class="nc" id="L46">	return client.getNickname();</span>
    }

    /**
     * sets the client's sound status
     */
    public void setSound(boolean soundOn){
<span class="nc" id="L53">	client.setSound(soundOn);</span>
<span class="nc" id="L54">    }</span>

    /**
     * controller gets the sound status from Client
     */
    public boolean isSoundOn(){
<span class="nc" id="L60">	return client.isSoundOn();</span>
    }

    /**
     * Connects to the server
     * @param ip Server IP address
     * @param name username
     * @param password password of the user
     * @return true when the username and password are valid, otherwise return false
     */
    public int connectServer(String ip, String name, String password){
<span class="nc" id="L71">	return client.connectServer(ip, name, password);</span>
    }

    /**
     * Displays a message on the client window
     * @param msg message to display on client window
     */
    public void displayMsg(String msg){
<span class="nc" id="L79">	ClientWindow.getWindow().getTaOutput().append(msg);</span>
<span class="nc" id="L80">    }</span>
    
       /**Method to send a message to a single recipient. This is the preferred method to use when sending a single message to another Client.
	*Takes the raw input from the ClientWindow and adds details relevant to the server (e.g. sender, receiver, service code)
	*@param msg The instant message intended to be sent to another User
	*@param rec The nickname of the intended User
	*@author jleeong
	*@version F16
	*/ 
	public void sendIM(String msg, String rec){
<span class="nc" id="L90">		client.sendIM(&quot; to &quot;+rec+&quot;: &quot;+msg+&quot;&amp;&quot;+rec+&quot;:1001&quot;);</span>
<span class="nc" id="L91">	}</span>

	/**Method to send a message to a ChatRoom on the server.
	*@param msg The message inteded to be sent to ChatRoom
	*@param rn The room number of the ChatRoom
	*@author jleeong
	*@version F16
	*/
	public void sendGrpMsg(String msg, String rn){
<span class="nc" id="L100">		client.sendIM(&quot; to ChatRoom: &quot;+msg+&quot;&amp;&quot;+rn+&quot;:1010&quot;);</span>
<span class="nc" id="L101">	}</span>
	
    /**
     * Sends a message to the server
     * @param s message being send to the server
     */
    public void sendMsg2Server(String s){
<span class="nc" id="L108">	client.sendMsg(s);</span>
<span class="nc" id="L109">    }</span>
	
	/** Adds contact to the Client contact list and appends the contact to the ClientWindow list
	*@param contact A string containing the nickname of the contact to be added
	*@author jleeong
	*@version F16
	*/
	public void addContact(String contact){
<span class="nc" id="L117">		String nickname = contact;</span>
<span class="nc bnc" id="L118" title="All 2 branches missed.">		if(contact.contains(&quot;(Online)&quot;)){</span>
<span class="nc" id="L119">			nickname = contact.substring(0, contact.indexOf('('));</span>
		}
<span class="nc" id="L121">		client.addContact(new Contact(nickname));</span>
<span class="nc" id="L122">		ClientWindow.getWindow().getContactList().addElement(contact);</span>
<span class="nc" id="L123">	}</span>
	
	/** Updates the Client's contact list to reflect the online status of a contact and mirrors the result in ClientWindow list
	*@param contact A string containing the nickname of the contact that has changed their online status
	*@param status A boolean that represents the online status of the Contact
	*@author jleeong
	*@version F16
	*/
	public void updateContact(String contact, boolean status){
<span class="nc" id="L132">		client.updateContact(contact, status);</span>
<span class="nc" id="L133">		String online = &quot;&quot;;</span>
<span class="nc" id="L134">		DefaultListModel windowlist = ClientWindow.getWindow().getContactList();</span>
<span class="nc bnc" id="L135" title="All 2 branches missed.">		if(status) windowlist.set(windowlist.lastIndexOf(contact), contact+&quot;(Online)&quot;);</span>
<span class="nc" id="L136">		else windowlist.set(windowlist.lastIndexOf(contact+&quot;(Online)&quot;), contact);</span>
<span class="nc" id="L137">	}</span>
	
	/** Method to send a ChatRoom registration the server.
	* @param reg A string representing the participants list as inputed from the launchRegisterChatRoomWindow
	* @author jleeong
	* @version F16
	*/
	public void sendChatRoomRegistration(String reg){
<span class="nc" id="L145">		String [] parts = reg.split(&quot;,&quot;);</span>
<span class="nc" id="L146">		String msg = &quot;&amp;1009:&quot;;</span>
<span class="nc bnc" id="L147" title="All 2 branches missed.">		for(String x : parts){</span>
<span class="nc" id="L148">			msg += x +&quot;:&quot;;</span>
		}
<span class="nc" id="L150">		client.sendChatRoomRegistration(msg);</span>
<span class="nc" id="L151">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.0.201801022044</span></div></body></html>